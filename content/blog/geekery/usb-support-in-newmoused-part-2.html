+++
# Imported from original pyblosxom .txt format at 2015-08-14 21:10:30 -0700
date = "2006-08-16T22:34:14-07:00"
title = "USB Mouse support in newmoused, working.\n"
# Marked a draft because frankly my old writing may not be worth surfacing again.
# I made bad word choices and had some strong-and-closed opinions years ago.
# We learn over time, eh? :)
draft = true
type = "blog"
categories = [ "blog" ]
tags = ["freebsd", "mouse", "usb", "code", "C"]
+++

I've got my usb mouse working with the new moused. Most of the code in the
module is ripped from usbhidctl(1). Now that I *actually* know how things work,
I found that the read() wasn't actually one with side effects. Good.

<p>

You'll need the new moused framework for this module.

<p>

Basic instructions:
<ol>
  <li> Download my moused framework (newpsm project on this site) </li>
  <li> Recompile your kernel without "device ums" </li>
  <li> Build moused, build the usbmouse module. </li>
  <li> Run moused: ./moused -m usbmouse -d /dev/uhid0 </li>
</ol>

If it doesn't work, let me know.

<p>

<a href="http://www.semicomplete.com/projects/newpsm/moused-usbmouse.tar.gz">moused-usbmouse.tar.gz</a>

<p>

Future plans:
<ul>
  <li> Rewrite ugly bits </li>
  <li> Port ums(4) hacks for broken mice </li>
  <li> Test with more mice </li>
  <li> Write uhid joypad support </li>
</ul>
