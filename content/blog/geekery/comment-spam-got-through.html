+++
# Imported from original pyblosxom .txt format at 2015-08-14
date = "2007-01-29T13:41:40-08:00"
title = "Comment spam that got through\n"
# Marked a draft because frankly my old writing may not be worth surfacing again.
# I made bad word choices and had some strong-and-closed opinions years ago.
# We learn over time, eh? :)
draft = true
type = "blog"
categories = [ "blog" ]
tags = ["spam", "site", "web"]
+++

I get emails from this site when someone comments.

<p>

This morning, this showed up:

<pre>
Name: Virtual Pharmacy
Email: [snipped]
URL: [snipped]
Hostname: 114.199.36.72.reverse.layeredtech.com (72.36.199.114)
Entry URL: http://www.semicomplete.com/blog/geekery/barcamp-sanfrancisco-2
Comment location: [snipped]

Everyone repeat, what alcohol should be consumed moderately, but what it means? Why to women
 recommend to drink more moderately than to men? What is the female alcoholism? WBR LeoP
</pre>

A quick google search for the strange tail token, <a
href="http://www.google.com/search?q=%22wbr+leop%22">"WBR LeoP"</a> reveals a
clear indication that this is comment spam (as if the content didn't give it
away).

<p>

The url the spammer used points at pharmacynewsblog.com, which looks like a normal blog.

<p>

It's not.

<p>

The content is entirely viagra-and-friends related, which is fine. However, examine a simple visible text snippet of the following (this is from the frontpage):

<pre>
Drug treatment may beat psychotherapy at ...
</pre>

<a href="http://www.google.com/search?q=%22Drug%20treatment%20may%20beat%20psychotherapy%20at%22">Google for this phrase</a> and you'll find that it's been plagiarized. But deliciously so:

<p>

View source, you'll see:

<pre>
&lt;p>Drug &lt;b class=ne>joint pain are &lt;/b>treatment &lt;BLINK class=ne>of
purchase &lt;/BLINK>may &lt;sup class=ne>wellbutrin at &lt;/sup>beat &lt;small
class=ne>and paxil vs &lt;/small>psychotherapy
</pre>

The css class 'ne' sets 'display: none' among other properties that make it
stay out of the way of the browser.

<p>

This is quite clever, and appears automated.

<p>

pharmacynewsblog.com seems to be a somewhat autogenerated spam blog that
takes news postings about viagara and the like and injects random html into it,
with the intention of defeating antispam solutions. Anti-spam engines probably
aren't smart enough to know that it should ignore the text pieces that are
invisible. Who knows.

<p>

But, back to the spam comment. I use javascript to poke parts of the comment
form indicating that a javascript-capable browser was used to submit the
comment. If javascript is not detected, the comment is denied.

<p>

This comment got through, which means that javascript was enabled, which means
that it was probably a webbrowser that did it.

<p>

Here's the apache log snippet:

<pre>
72.36.199.114 - - [29/Jan/2007:13:01:17 -0500] "GET /blog/geekery/barcamp-sanfrancisco-2.html HTTP/1.1" 200 15903 "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
72.36.199.114 - - [29/Jan/2007:13:01:18 -0500] "GET /style.css HTTP/1.1" 200 2584 "http://www.semicomplete.com/blog/geekery/barcamp-sanfrancisco-2.html" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
72.36.199.114 - - [29/Jan/2007:13:01:20 -0500] "POST /blog/geekery/barcamp-sanfrancisco-2 HTTP/1.1" 200 16392 "http://www.semicomplete.com/blog/geekery/barcamp-sanfrancisco-2.html" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
72.36.199.114 - - [29/Jan/2007:13:01:21 -0500] "GET /style.css HTTP/1.1" 200 2584 "http://www.semicomplete.com/blog/geekery/barcamp-sanfrancisco-2" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"
</pre>

It didn't fetch any images, but it did pull style sheets, which is strange
behavior if it's a simple spam bot that doesn't care about how a page looks. It
also pulled the blog posting page first, then submitted a comment. Further
indication that this bot is either really clever, or a person is behind the
wheel.

<p>

If you search for the ip, 72.36.199.114, the first hit on google is <a
href="http://alpha.rod.elinc.ca/spamlist.php"> an automagically updated list of
known comment spam hosts.</a>
