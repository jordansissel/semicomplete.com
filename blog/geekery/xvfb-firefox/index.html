<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>Xvfb &#43; Firefox
 - semicomplete</title>
  <meta property="og:title" content="Xvfb &#43; Firefox
 - semicomplete" />
  <meta name="twitter:title" content="Xvfb &#43; Firefox
 - semicomplete" />
  <meta name="description" content="Resig has a bunch of unit tests he does to make sure jQuery works properly on whatever browser. Manually running and checking unit test results is annoying and time consuming. Let&rsquo;s automate this.
Update (May 2010): See this post for more details on automating xserver startup without having to worry about display numbers (:1, :2, etc).
Combine something simple like Firefox and Xvfb (X Virtual Frame Buffer), and you&rsquo;ve got a simple way to run Firefox without a visible display.">
  <meta property="og:description" content="Resig has a bunch of unit tests he does to make sure jQuery works properly on whatever browser. Manually running and checking unit test results is annoying and time consuming. Let&rsquo;s automate this.
Update (May 2010): See this post for more details on automating xserver startup without having to worry about display numbers (:1, :2, etc).
Combine something simple like Firefox and Xvfb (X Virtual Frame Buffer), and you&rsquo;ve got a simple way to run Firefox without a visible display.">
  <meta name="twitter:description" content="Resig has a bunch of unit tests he does to make sure jQuery works properly on whatever browser. Manually running and checking unit test results is annoying and time consuming. Let&rsquo;s automate â€¦">
  <meta name="author" content="Jordan Sissel"/>
  <meta property="og:site_name" content="semicomplete" />
  <meta property="og:url" content="https://semicomplete.com/blog/geekery/xvfb-firefox/" />
  <meta property="og:type" content="article" />
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.54.0" />

  <link rel="stylesheet" href="/css/style.css" media="all" />
  <link rel="stylesheet" href="/css/syntax.css" media="all" />
  <link rel="stylesheet" href="/css/custom.css" media="all" />
  <script defer src="/js/fontawesome.js"></script>
</head>

<body>

<header class="site-header">
  <nav class="site-navi">
    <h1 class="site-title"><a href="/">semicomplete</a></h1>
    <ul class="site-navi-items">
      <li class="site-navi-item-categories"><a href="/categories/" title="Categories">Categories</a></li>
      <li class="site-navi-item-tags"><a href="/tags/" title="Tags">Tags</a></li>
      <li class="site-navi-item-archives"><a href="/archives/" title="Archives">Archives</a></li>
      <li class="site-navi-item-about"><a href="/about/" title="About">About</a></li>
    </ul>
  </nav>
</header>
<hr class="site-header-bottom">

  <div class="main" role="main">
    <article class="article">
      
      
      <h1 class="article-title">Xvfb &#43; Firefox
</h1>
      
      <hr class="article-title-bottom">
      <ul class="article-meta">
        <li class="article-meta-date"><time>8 April, 2006</time></li>
        <li class="article-meta-categories">
          <a href="/categories/old/">
            <i class="fas fa-folder"></i>
            old
          </a>&nbsp;
        </li>
        <li class="article-meta-tags">
          <a href="/tags/web/">
            <i class="fas fa-tag"></i>
            web
          </a>&nbsp;
        </li>
        <li class="article-meta-tags">
          <a href="/tags/firefox/">
            <i class="fas fa-tag"></i>
            firefox
          </a>&nbsp;
        </li>
        <li class="article-meta-tags">
          <a href="/tags/x11/">
            <i class="fas fa-tag"></i>
            X11
          </a>&nbsp;
        </li>
        <li class="article-meta-tags">
          <a href="/tags/ideas/">
            <i class="fas fa-tag"></i>
            ideas
          </a>&nbsp;
        </li>
      </ul>
      
      

<p><a href="http://www.ejohn.org">Resig</a> has a bunch of unit tests he does to make sure <a href="http://www.jquery.com">jQuery</a> works properly on whatever browser. Manually running and checking unit test results is annoying and time consuming. Let&rsquo;s automate this.</p>

<h2 id="update-may-2010">Update (May 2010):</h2>

<p>See
<a href="/blog/geekery/headless-wrapper-for-ephemeral-xservers.html">this
post</a> for more details on automating xserver startup without having to worry
about display numbers (:1, :2, etc).</p>

<hr />

<p>Combine something simple like Firefox and Xvfb (X Virtual Frame Buffer), and you&rsquo;ve got a simple way to run Firefox without a visible display.</p>

<p>Let&rsquo;s start Xvfb:</p>

<pre><code>startx -- `which Xvfb` :1 -screen 0 1024x768x24

# Or with Xvnc (also headless)
startx -- `which Xvnc` :1 -geometry 1024x768x24

# Or with Xephyr (nested X server, requires X)
startx -- `which Xephyr` :1 -screen 1024x768x24

</code></pre>

<p>This starts Xvfb running on :1 with a screen size of 1024x768 and 24bits/pixel color depth. Now, let&rsquo;s run firefox:</p>

<pre><code>DISPLAY=:1 firefox

# Or, if you run csh or tcsh
env DISPLAY=:1 firefox
</code></pre>

<p>Seems simple enough. What now? We want to tell firefox to go to google.com, perhaps.</p>

<pre><code>DISPLAY=:1 firefox-remote http://www.google.com/
</code></pre>

<p>Now, let&rsquo;s take a screenshot (requires ImageMagick&rsquo;s import command):</p>

<pre><code>DISPLAY=:1 import -window root googledotcom.png
</code></pre>

<p>Lets see what that looks like: <a href="http://www.semicomplete.com/images/googledotcom.png">googledotcom.png</a></p>

<p>While this isn&rsquo;t complicated, we could very easily automate lots of magic using
something like the Selenium extension, all without requiring the use of a
visual display (Monitor). Hopefully I&rsquo;ll find time to work on something cool
using this soon.</p>

<p>Problems with screen scraping and other website interaction automation is that
it almost always needs to be done without a browser. For instance, all of my
screen scraping adventures have been using Perl. Browsers already know how to
speak to the web, so why reinvent the wheel?</p>

<p>Firefox has lots of javascript-magic extensions such as <a
href="http://greasemonkey.mozdev.org/">greasemonkey</a> and <a
href="http://www.openqa.org/selenium/">Selenium</a> to let you execute
browser-side javascript and activity automatically. Combine these together with
Xvfb, and you can automate lots of things behind the scenes.</p>

<p>Tie this back to unit tests. Instead of simply displaying results of unit tests,
have the page also report the results to a cgi script on the webserver. This
will let you automatically test websites using a web browser and have it
automatically report the results back to a server.</p>

    </article>

    <ul class="pager article-pager">
      <li class="pager-newer">
          <a href="/blog/geekery/headless-wrapper-for-ephemeral-xservers/" data-toggle="tooltip" data-placement="top" title="Headless wrapper for ephemeral X servers
">&lt; Newer</a>
      </li>
      <li class="pager-older pager-noitem">Older &gt;</li>
    </ul>
  </div>


<div class="site-footer">
  <div class="copyright">&copy; Copyright 2006-2019 Jordan Sissel - Content licensed as <a href='https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode'>CC BY-NC-SA</a></div>
  <ul class="site-footer-items">
    <li class="site-footer-item-about"><a href="/about/" title="About">About</a></li>
  </ul>
  <div class="powerdby">
    Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/taikii/whiteplain">Whiteplain</a>
  </div>
</div>


</body>
</html>
